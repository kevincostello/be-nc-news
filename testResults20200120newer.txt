
> be-nc-news@1.0.0 test /Users/kevincostello/Northcoders/Backend/be-nc-news
> mocha spec/app.spec.js

topicsRouter
usersRouter
articlesRouter
commentsRouter


  /api
test
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
    ✓ Returns GET /api with status of 200 and a JSON containing all of the endpoints on the api (44ms)
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
    ✓ Returns DELETE /api with an error code of 405 Method Not Allowed
    /topics
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
      ✓ GET responds with status code of 200 and returns array of topics
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
in 3 parameter 404 error log
      ✓ GET responds with status code of 404 when the path has a misspelling
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
      ✓ Returns PATCH /api/topics with an error code of 405 Method Not Allowed
    /users
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models - user
      ✓ GETS a status code of 200 when a valid username is passed as a parameter in the path
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models - user
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GETS a status code of 404 when passed an invalid username
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
      ✓ Returns PATCH /api/users with an error code of 405 Method Not Allowed
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
      ✓ Returns PUT /api/users/butter_bridge with an error code of 405 Method Not Allowed
    /articles
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
      ✓ GETS a status code of 200 when passed a valid article id
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
In 4 parameter error handler
      ✓ GETS a status code of 400 when passed an invalid article id
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GETS a status code of 404 when passed a valid article id which is not in the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
      ✓ GETS a status code of 200 and creates the comment count correctly when passed a valid article id
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
      ✓ GETS a status code of 200 and creates the comment count of zero when passed a valid article id which is not in the comments table
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
patching result is completed
      ✓ PATCHES with a status code of 200 when passed an object containing the vote count change
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
In 4 parameter error handler
      ✓ PATCHES with as status code of 400 when passed an object with an invalid value for inc_votes
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
      ✓ Returns POST /api/articles/1 with an error code of 405 Method Not Allowed
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
      ✓ GETS a status code of 200 when passed a valid path to /api/articles
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
in 3 parameter 404 error log
      ✓ GETS a status code of 404 when passed an invalid path to /api/articles
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
      ✓ GETS a status code of 200 when passed a valid path and sorts by the default column and default order by
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
      ✓ GETS a status code of 200 and returns an array of sorted articles by the created_at for a given article id when valid queries are passed in the request with a valid column as the sort by column and default order by value
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
      ✓ GETS a status code of 200 and returns an array of sorted articles by the created_at for a given article id when valid queries are passed in the request with order by value of asc
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
      ✓ GETS a status code of 200 and returns an array of sorted articles by the title fwhen valid queries are passed in the request with a valid column as the sort by column and order by value is asc
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
      ✓ GETS a status code of 200 and returns an array of sorted articles by the title filtered by author when passedwhen valid queries are passed in the request with a valid column as the sort by column and order by value is asc and a valid value for author
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
im in the models
      ✓ GETS a status code of 200 and returns an array of sorted articles by the title filtered by topic when passed valid queries are passed in the request with a valid column as the sort by column and order by value is asc and a valid value for topic
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models
      ✓ GETS a status code of 200 and returns an array of sorted articles by the title filtered by topic but not filterd by author when passed valid queries are passed in the request with a valid column as the sort by column and order by value is asc and a valid value for topic
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
      ✓ GETS a status code of 200 and returns an array of sorted articles by the title filtered by topic but not filterd by topic when passed valid queries are passed in the request with a valid column as the sort by column and order by value is asc and a valid value for author
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GETS a status code of 404 when passed an author name not in the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GETS a status code of 404 when passed a title not in the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GETS a status code of 404 when passed an author and a title not in the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
In 4 parameter error handler
      ✓ GETS a status code of 400 when passed sort_by column not on the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GETS a status code of 400 when passed invalid order by value
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
      ✓ GET a status code of 200 an empty array when passed a valid author who has no articles
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In sendAllArticles
In selectAllArticles
im in the models - user
In 4 parameter error handler
in default 4 parameter error handler
      ✓ GET a status code of 404, author name not in the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
      ✓ Returns PATCH /api/articles with an error code of 405 Method Not Allowed
      /:article_id/comments
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller comment
im in the models - post
        ✓ POSTS a comment with status code of 201 when passed an object containing the comment
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller comment
im in the models - post
In 4 parameter error handler
        ✓ POSTS a comment with status code of 400 when passed an object not containing any keys
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller comment
im in the models - post
In 4 parameter error handler
        ✓ POSTS a comment with status code of 400 when passed an object not containing the username
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller comment
im in the models - post
In 4 parameter error handler
        ✓ POSTS a comment with status code of 400 when passed an object not containing the body
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller comment
im in the models - post
In 4 parameter error handler
        ✓ POSTS a status code of 404 when the passed article_id is not on the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an array of comments for a given article id when valid queries are passed in the request
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an array of sorted comments by the created_at for a given article id when valid queries are passed in the request with created_at as the sort by column and desc as the order by value
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an array of sorted comments by the created_at for a given article id when valid queries are passed in the request with a valid column as the sort by column and default order by value
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an array of sorted comments by the created_at for a given article id when valid queries are passed in the request with a valid column as the sort by column and order by value is desc
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an array of sorted comments by the created_at for a given article id when valid queries are passed in the request with a default sort by column and order by value is asc
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an array of sorted comments by the created_at for a given article id when valid queries are passed in the request with a valid column as the sort by column and order by value is asc
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
In 4 parameter error handler
        ✓ GETS a status code of 400 with message of invalid column for sort_by when passed an invalid column for sort_by 
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
In 4 parameter error handler
in default 4 parameter error handler
        ✓ GETS a status code of 400 with message of invalid order value when passed an invalid order value 
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller get comments by article id
In selectCommentsByArticleId
im in the models
        ✓ GETS a status code of 200 and returns an empty articles array when passes an article_id which exists but is has not comments
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
        ✓ Returns PATCH /api/articles with an error code of 405 Method Not Allowed
    /comments
      /:comment_id
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
        ✓ PATCHES with status of 200 when passed a valid votes object, checked against expected object in test
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
In 4 parameter error handler
        ✓ PATCHES with as status code of 400 when passed an object with an invalid value for inc_votes
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
        ✓ PATCHES a comment with status code of 200 and returns the unchanged comment when passed an object not containing any keys
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
In 4 parameter error handler
in default 4 parameter error handler
        ✓ PATCHES a comment with status code of 200 and returns the unchanged comment when passed an object not containing any keys
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
im in the models
In 4 parameter error handler
in default 4 parameter error handler
        ✓ PATCHES with a status code of 404 when the passed a key not on the database
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
In delete comment model
        ✓ DELETES with status code of 204, when passed a comment_id
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
in 3 parameter 404 error log
        ✓ DELETES with status code of 404, when passed a misspelt path
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
In delete comment model
In 4 parameter error handler
in default 4 parameter error handler
        ✓ DELETES with status code of 404, when passed a comment_id that does not exist
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In controller
In delete comment model
In 4 parameter error handler
        ✓ DELETES with status code of 400, when passed an invalid comment_id
removing comments table test
removing articles table test
Dropping users table test
removing topics table test
creating topics table test
Creating users table test
creating articles table test
creating comments table test
In 405 error handler
        ✓ Returns PATCH /api/comments/1 with an error code of 405 Method Not Allowed


  60 passing (9s)

